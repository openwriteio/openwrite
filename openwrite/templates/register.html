{% include 'header.html' %}

<h1 class="centered">{{ g.trans["register_on_this_instance"] }}</h1>

<article class="main-content">
    {% if error %}
    <div class="error">{{ error }}</div>
    {% endif %}
    {% if message %}
    <div class="message">{{ message }}</div>
    {% endif %}
    <form method="post" action="/register">
        <span class="form-field">{{ g.trans["username"] }}:</span>
        <input type="text" name="username">       
        <span class="form-field">{{ g.trans["password"] }}:</span>
        <input type="password" name="password">
        <span class="form-field">{{ g.trans["password2"] }}:</span>
        <input type="password" name="password2">
        <input type="submit" name="sub" value="{{ g.trans["register"] }}" class="btn purple" style="margin-top: 1rem;">
        {% if g.captcha %}
        <div class="frc-captcha" data-sitekey="{{ g.fcaptcha_sitekey }}"></div>
        {% endif %}
    </form>
</article>
<script nonce="{{ g.nonce }}">
const form = document.querySelector("form");
const submit = form.querySelector('input[name="sub"]');

const username = form.querySelector('input[name="username"]');
const password = form.querySelector('input[name="password"]');
const password2 = form.querySelector('input[name="password2"]');

username.addEventListener("input", function() {
    if((this.value.length > 29) || (this.value.match(/^[a-zA-Z0-9](?:[a-zA-Z0-9_-]{1,28}[a-zA-Z0-9])?$/) == null)) {
        this.style.border = "1px solid #ff0000";
    } else {
        this.style.border = "";
    }
});

</script>
{% include 'footer.html' %}
